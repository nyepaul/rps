<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Retirement Planning System</title>

    <!-- Password Manager Site Identification -->
    <meta name="application-name" content="Retirement Planning System - rps.pan2.app">
    <meta property="og:site_name" content="rps.pan2.app">
    <link rel="canonical" href="https://rps.pan2.app/login">

    <link rel="stylesheet" href="/css/login.css">
</head>
<body>
    <div class="login-container" style="position: relative;">
        <div class="version-badge">v3.9.28</div>
        <h1 style="margin-bottom: 30px;">Welcome Back</h1>
        
        <div id="message"></div>
        
        <!-- Login Form -->
        <form id="loginForm" action="https://rps.pan2.app/api/auth/login" method="post">
            <input type="hidden" name="site" value="rps.pan2.app">
            <div class="form-group">
                <label for="loginUsername">Username</label>
                <input type="text" id="loginUsername" name="username" required autocomplete="username">
            </div>
            <div class="form-group">
                <label for="loginPassword">Password</label>
                <input type="password" id="loginPassword" name="password" required autocomplete="current-password">
            </div>
            <div style="text-align: right; margin-bottom: 15px;">
                <a href="/account-recovery.html" style="color: #667eea; text-decoration: none; font-size: 14px;">Forgot Password?</a>
            </div>
            <button type="submit" id="loginBtn">Login</button>
            <div class="login-spinner" id="loginSpinner">
                <div class="spinner"></div>
                <span class="spinner-text">Validating credentials...</span>
            </div>
        </form>

        <!-- Register Form -->
        <form id="registerForm" class="hidden" action="https://rps.pan2.app/api/auth/register" method="post">
            <input type="hidden" name="site" value="rps.pan2.app">
            <div class="form-group">
                <label for="registerUsername">Username</label>
                <input type="text" id="registerUsername" name="username" required autocomplete="username">
                <small>3-50 characters, letters, numbers, hyphens, underscores only</small>
            </div>
            <div class="form-group">
                <label for="registerEmail">Email</label>
                <input type="email" id="registerEmail" name="email" required autocomplete="email">
            </div>
            <div class="form-group">
                <label for="registerPassword">Password</label>
                <input type="password" id="registerPassword" name="password" required autocomplete="new-password">
                <small>Min 8 characters, with uppercase, lowercase, and number</small>
            </div>
            <button type="submit" id="registerBtn">Register</button>
            <div class="login-spinner" id="registerSpinner">
                <div class="spinner"></div>
                <span class="spinner-text">Creating account...</span>
            </div>
        </form>

        <!-- Password Reset Request Form -->
        <form id="resetRequestForm" class="hidden">
            <div class="form-group">
                <label for="resetUsername">Username</label>
                <input type="text" id="resetUsername" required autocomplete="username">
            </div>
            <div class="form-group">
                <label for="resetEmail">Email Address</label>
                <input type="email" id="resetEmail" required autocomplete="email">
                <small>Enter the email address associated with your account</small>
            </div>
            <button type="submit" id="resetRequestBtn">Send Reset Link</button>
        </form>

        <!-- Password Reset Form -->
        <form id="resetPasswordForm" class="hidden">
            <div class="form-group">
                <label for="newPassword">New Password</label>
                <input type="password" id="newPassword" required autocomplete="new-password">
                <small>Min 8 characters, with uppercase, lowercase, and number</small>
            </div>
            <div class="form-group">
                <label for="confirmPassword">Confirm New Password</label>
                <input type="password" id="confirmPassword" required autocomplete="new-password">
            </div>
            <button type="submit" id="resetPasswordBtn">Reset Password</button>
        </form>

        <div class="toggle-form">
            <span id="toggleText">Don't have an account? </span>
            <a href="#" id="toggleLink">Register</a>
            <span id="backToLoginLink" class="hidden"> | <a href="#" id="backToLogin">Back to Login</a></span>
        </div>
    </div>
    
    <script src="/js/login.js"></script>
</body>
</html>